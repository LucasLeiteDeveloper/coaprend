<ion-header class="subpage-header">
  <ion-toolbar class="content-container">
    <ion-back-button
      slot="start"
      icon="chevron-back-outline"
      aria-label="Voltar"
      color="dark"
      text="">
    </ion-back-button>
    <ion-title>Criar Post</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding grid-spacing-m">

  <ion-input
    type="text"
    placeholder="Digite aqui"
    label="Título*"
    labelPlacement="stacked"
    [(ngModel)]="title"
    name="title"
    style="border-bottom: 1px solid gray;">
  </ion-input>

  <ion-textarea
    placeholder="Digite aqui"
    label="Conteúdo*"
    labelPlacement="stacked"
    [autoGrow]="true"
    [(ngModel)]="content"
    name="content">
  </ion-textarea>

  <input
    type="file"
    accept="image/*"
    hidden
    #fileInput
    (change)="onFileSelected($event)"
  />

  <!-- MODAL DO CALENDÁRIO -->
  <ion-modal [isOpen]="showCalendar" (didDismiss)="showCalendar = false">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Selecionar data</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="showCalendar = false">Fechar</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>

      <ion-content class="ion-padding">
        <ion-datetime
          presentation="date"
          [(ngModel)]="postDate">
        </ion-datetime>

        <ion-button expand="block" (click)="confirmDate()">
          Confirmar
        </ion-button>
      </ion-content>
    </ng-template>
  </ion-modal>

</ion-content>

<!-- FAB -->
<ion-fab vertical="bottom" horizontal="end" slot="fixed"
         style="display: flex; align-items: end; gap: 8px;">

  <!-- Calendário -->
  <div class="fab-secondary-button"
       aria-label="Atrelar a uma data"
       (click)="openCalendar()">
    <ion-icon name="calendar-outline" class="icon-s"></ion-icon>
  </div>

  <!-- Imagens -->
  <div class="fab-secondary-button"
       aria-label="Adicionar imagens"
       (click)="fileInput.click()">
    <ion-icon name="image-outline" class="icon-s"></ion-icon>
  </div>

  <!-- Tags -->
  <button class="fab-secondary-button"
          aria-label="Adicionar Tags"
          (click)="openTagSelector()">
    <ion-icon name="pricetag-outline" class="icon-s"></ion-icon>
  </button>

  <!-- Publicar -->
  <button class="fab-primary-button"
          aria-label="Publicar a tarefa"
          (click)="createPost()">
    <ion-icon name="add" class="icon-m"></ion-icon>
  </button>
</ion-fab>
